<ion-header>
  <ion-navbar>
    <button ion-button menuToggle *ngIf="!isSearchbaropened">
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title *ngIf="!isSearchbaropened" class="algemeenText">Algemeen</ion-title>
    <!-- Searchbar  -->
    <ion-searchbar #searchbar *ngIf="isSearchbaropened" [showCancelButton]="true" (ionCancel)="resetChanges()" (ionInput)="search($event)" placeholder="Waar zijn we naar op zoek?" class="slideInRight"></ion-searchbar>
    <!-- Searchbar icon -->
    <ion-buttons end>
      <button ion-button icon-only (click)="isSearchbaropened=true">
        <ion-icon name="search" *ngIf="!isSearchbaropened"></ion-icon>
      </button>
    </ion-buttons>
  </ion-navbar>
  <!-- Segment -->
  <ion-segment [(ngModel)]="datepicker" color="lightAppKleur">
    <ion-segment-button value="vandaag" (click)="loadWithSpinner()">
      Vandaag
    </ion-segment-button>
    <ion-segment-button value="gisteren" (click)="loadYesterday()">
      Gisteren
    </ion-segment-button>
    <ion-segment-button value="driedagengeleden" (click)="load3DaysAgo()">
      3 dagen geleden
    </ion-segment-button>
    <ion-segment-button value="hetWeer" (click)="getRemoteData()">
      Het Weer
    </ion-segment-button>
  </ion-segment>
</ion-header>
<ion-content>
  <!-- Swipe up refresher  -->
  <ion-refresher (ionRefresh)="doRefresh($event)">
    <ion-refresher-content pullingIcon="arrow-dropdown" pullingText="Sleep omlaag om te verversen"></ion-refresher-content>
  </ion-refresher>
  <ion-grid *ngIf="datepicker == 'vandaag' || datepicker == 'gisteren' || datepicker == 'driedagengeleden'">
    <ion-row>
      <ion-col *ngFor="let item of items" col-md-6 col-sm-6 col-lg-6 col-xl-6>
        <ion-card>
          <!-- Images van nieuwsfeed -->
          <div class="ion-card-image-wrapper" (click)="viewEntry({ record: item })">
            <img *ngIf="!item.image" src="../assets/imgs/noimage.jpg">
            <img [src]="item.image" *ngIf="item.site == 'NOS.nl'">
            <img [src]="item.image" *ngIf="item.site != 'NOS.nl' || item.site != 'NU.nl'">
          </div>
          <ion-card-content>
            <!-- Title  -->
            <div id="title" (click)="viewEntry({ record: item })">
              <ion-card-title class="TitleFeed">
                <strong>{{item.title}}</strong>
              </ion-card-title>
            </div>
            <!-- description  -->
            <div id="description" (click)="viewEntry({ record: item })">
              <p class="descriptionFeed">{{htmlToPlaintext(item.description) | slice:0:120}}...</p>
            </div>
          </ion-card-content>
          <!-- Ion-badges  -->
          <ion-item (click)="viewEntry({ record: item })" class="badgeItem">
            <ion-icon name="contact" item-start></ion-icon>
            <ion-badge item-end *ngIf="item.site == 'De Telegraaf'" class="ColorTelegraaf">{{item.site}}
            </ion-badge>
            <ion-badge item-end *ngIf="item.site == 'NOS'" class="ColorNOS">{{item.site}}</ion-badge>
            <ion-badge item-end *ngIf="item.site == 'NU.nl'" class="ColorNU">{{item.site}}</ion-badge>
          </ion-item>
          <ion-item (click)="viewEntry({ record: item })" class="badgeItem">
            <ion-icon name="time" item-start></ion-icon>
            <ion-badge item-end *ngIf="item.site == 'De Telegraaf'" class="ColorTelegraaf">{{item.datum}}
            </ion-badge>
            <ion-badge item-end *ngIf="item.site == 'NOS'" class="ColorNOS">{{item.datum}}</ion-badge>
            <ion-badge item-end *ngIf="item.site == 'NU.nl'" class="ColorNU">{{item.datum}}</ion-badge>
          </ion-item>
          <!-- Social Buttons - Comments - likes - Share -->
          <div id="socialLikeComments" class="socialLikeComments">
            <button class="socialTelegraaf" ion-button icon-start clear *ngIf="item.site == 'De Telegraaf'">
              <ion-icon name="heart"></ion-icon>
              <div>0 Likes</div>
            </button>
            <button class="socialNOS" ion-button icon-start clear *ngIf="item.site == 'NOS'">
              <ion-icon name="heart"></ion-icon>
              <div>0 Likes</div>
            </button>
            <button class="socialNu" ion-button icon-start clear *ngIf="item.site == 'NU.nl'">
              <ion-icon name="heart"></ion-icon>
              <div>0 Likes</div>
            </button>
            <button ion-button icon-start clear *ngIf="item.site == 'De Telegraaf'" class="socialTelegraaf" (click)="viewComments({ record: item })">
              <ion-icon name="chatbubbles"></ion-icon>
              <div *ngIf="item.comments == 1">{{item.comments}} Reactie</div>
              <div *ngIf="item.comments != 1">{{item.comments}} Reacties</div>
            </button>
            <button ion-button icon-start clear *ngIf="item.site == 'NOS'" class="socialNOS" (click)="viewComments({ record: item })">
              <ion-icon name="chatbubbles"></ion-icon>
              <div *ngIf="item.comments == 1">{{item.comments}} Reactie</div>
              <div *ngIf="item.comments != 1">{{item.comments}} Reacties</div>
            </button>
            <button ion-button icon-start clear *ngIf="item.site == 'NU.nl'" class="socialNu" (click)="viewComments({ record: item })">
              <ion-icon name="chatbubbles"></ion-icon>
              <div *ngIf="item.comments == 1">{{item.comments}} Reactie</div>
              <div *ngIf="item.comments != 1">{{item.comments}} Reacties</div>
            </button>
            <button ion-button icon-start clear *ngIf="item.site == 'De Telegraaf'" class="socialTelegraaf">
              <ion-icon name="share-alt"></ion-icon>
              <div>Share</div>
            </button>
            <button ion-button icon-start clear *ngIf="item.site == 'NOS'" class="socialNOS">
              <ion-icon name="share-alt"></ion-icon>
              <div>Share</div>
            </button>
            <button ion-button icon-start clear *ngIf="item.site == 'NU.nl'" class="socialNu">
              <ion-icon name="share-alt"></ion-icon>
              <div>Share</div>
            </button>
            <!-- only admins kunnen dit zien, hide button voor de artikelen -->
            <button ion-button icon-start clear *ngIf="item.site == 'De Telegraaf' && rol == 1" class="socialTelegraaf" (click)="setHideArticle(item.id)">
              <ion-icon name="eye-off"></ion-icon>
              <div>Hide</div>
            </button>
            <button ion-button icon-start clear *ngIf="item.site == 'NOS' && rol == 1" class="socialNOS" (click)="setHideArticle(item.id)">
              <ion-icon name="eye-off"></ion-icon>
              <div>Hide</div>
            </button>
            <button ion-button icon-start clear *ngIf="item.site == 'NU.nl' && rol == 1" class="socialNu" (click)="setHideArticle(item.id)">
              <ion-icon name="eye-off"></ion-icon>
              <div>Hide</div>
            </button>
          </div>
        </ion-card>
      </ion-col>
      <ion-infinite-scroll (ionInfinite)="doInfinite($event)" loadingSpinner="bubbles">
        <ion-infinite-scroll-content></ion-infinite-scroll-content>
      </ion-infinite-scroll>
    </ion-row>
  </ion-grid>
  <div *ngIf="datepicker == 'hetWeer'">
    <ion-item *ngFor="let weer of dataweer">
      <p>{{weer.about}}</p>
    </ion-item>
  </div>

</ion-content>
